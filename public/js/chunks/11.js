(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{127:function(t,e,n){var o=n(209);"string"==typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(17)(o,i);o.locals&&(t.exports=o.locals)},208:function(t,e,n){"use strict";n(127)},209:function(t,e,n){(t.exports=n(16)(!1)).push([t.i,"\n.d-inline {\n  font-size: 10px;\n}\ntd {\n  font-size: 12px;\n}\n",""])},518:function(t,e,n){"use strict";n.r(e);var o=n(2),i=n.n(o),s={name:"Fleets",data:function(){return{items:[],fields:["id","code","name","mobile","identity","Wallet_balance","last_login","status","operation"],fieldsAr:["رقم_التسلسل","رقم_الكود","الأسم","الموبايل","الرقم_التعريفى","رصيد_المحفظة","أخر_تسجيل","الحالة","التحكم"],sorter:{column:"",asc:!1},activePage:1,myLang:"",maxPages:1,message:"",alertColor:"",showMessage:!1,dismissSecs:3,dismissCountDown:0,showDismissibleAlert:!1,columnFilter:{},pageOfItems:[],loading:!1,onlineCount:0,offlineCount:0,totalCount:0}},watch:{activePage:function(){this.getFleets()},sorter:{handler:function(){this.getFleets()},deep:!0},columnFilter:function(){this.getFleets()}},methods:{changeItemsLimit:function(t){this.itemsLimit=t,this.getFleets()},getBadge:function(t){return"online"===t?"success":"offline"===t?"danger":"primary"},getWalletBadge:function(t){return parseFloat(t)<=0?"danger":"success"},walletLink:function(t){return"fleets/".concat(t.toString(),"/wallet")},editLink:function(t){return"fleets/".concat(t.toString(),"/edit")},showLink:function(t){return"fleets/".concat(t.toString(),"/show")},goWallet:function(t){var e=this.walletLink(t);this.$router.push({path:e})},createFleet:function(){this.$router.push({path:"fleets/create"})},editFleet:function(t){var e=this.editLink(t);this.$router.push({path:e})},showFleet:function(t){var e=this.showLink(t);this.$router.push({path:e})},deleteFleet:function(t){var e=this;i.a.post("/api/fleets/"+t+"?token="+localStorage.getItem("api_token"),{_method:"DELETE"}).then((function(t){e.alertColor="success",e.message="Successfully deleted user.",e.showAlert(),e.getFleets()})).catch((function(t){console.log(t),e.alertColor="danger",e.message="unexpected error occurred in delete the fleet.",e.showAlert()}))},countDownChanged:function(t){this.dismissCountDown=t},showAlert:function(){this.dismissCountDown=this.dismissSecs},getFleets:function(){this.loading=!0;var t=this;this.items=[],i.a.get("/api/fleets?page="+t.activePage+"&token="+localStorage.getItem("api_token"),{params:{sorter:t.sorter,columnFilter:t.columnFilter,itemsLimit:t.itemsLimit}}).then((function(e){console.log(e),t.items=t.items.concat(e.data.fleets.data),t.maxPages=e.data.fleets.last_page,t.onlineCount=e.data.onlineCount,t.totalCount=e.data.fleets.total,t.loading=!1})).catch((function(e){console.log(e),t.loading=!1,t.alertColor="danger",t.message="unexpected error occurred in gettin fleets.",t.showAlert()}))},makeFilter:function(){this.getFleets()},getLocale:function(){var t;t=localStorage.getItem("locale")||"en",this.myLang=t}},mounted:function(){this.getFleets(),this.getLocale()}},a=(n(208),n(1)),l=Object(a.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CRow",[n("div",{staticClass:"move-top"},[n("CCol",{attrs:{col:"12",xl:"12"}},[n("CRow",[n("CCol",{attrs:{col:"3"}},[n("CButton",{staticClass:"m-3 my-create-fleet",attrs:{color:"primary"},on:{click:function(e){return t.createFleet()}}},[n("img",{staticClass:"plus-fleet",attrs:{src:"/img/plus.png"}}),t._v("\n            "+t._s(t.$t("create_driver"))+"\n          ")])],1),t._v(" "),n("CCol",{attrs:{col:"3"}},[n("CCallout",{attrs:{color:"success"}},[n("small",{staticClass:"text-muted"},[t._v(t._s(t.$t("online")))]),n("br"),t._v(" "),n("strong",{staticClass:"h4"},[t._v(t._s(t.onlineCount))])])],1),t._v(" "),n("CCol",{attrs:{col:"3"}},[n("CCallout",{attrs:{color:"danger"}},[n("small",{staticClass:"text-muted"},[t._v(t._s(t.$t("offline")))]),n("br"),t._v(" "),n("strong",{staticClass:"h4"},[t._v(t._s(t.totalCount-t.onlineCount))])])],1),t._v(" "),n("CCol",{attrs:{col:"3"}},[n("CCallout",{attrs:{color:"info"}},[n("small",{staticClass:"text-muted"},[t._v(t._s(t.$t("total")))]),n("br"),t._v(" "),n("strong",{staticClass:"h4"},[t._v(t._s(t.totalCount))])])],1)],1)],1),t._v(" "),n("CCol",{attrs:{col:"12",xl:"12"}},[n("transition",{attrs:{name:"slide"}},[n("CCard",[n("CCardHeader",[t._v(t._s(t.$t("drivers")))]),t._v(" "),n("CCardBody",[n("CAlert",{attrs:{show:t.dismissCountDown,color:t.alertColor,fade:""},on:{"update:show":function(e){t.dismissCountDown=e}}},[t._v("\n              ("+t._s(t.dismissCountDown)+") "+t._s(t.message)+"\n            ")]),t._v(" "),n("CCol",{attrs:{sm:"12"}},["en"==t.myLang?n("CDataTable",{attrs:{items:t.items,fields:t.fields,"index-column":"",hover:"","table-column":"","items-per-page-select":"",sorter:{external:!0,resetable:!0},columnFilter:{external:!0,lazy:!0},"sorter-value":t.sorter,"column-filter-value":t.columnFilter,loading:t.loading},on:{"pagination-change":t.changeItemsLimit,"update:sorterValue":function(e){t.sorter=e},"update:sorter-value":function(e){t.sorter=e},"update:columnFilterValue":function(e){t.columnFilter=e},"update:column-filter-value":function(e){t.columnFilter=e}},scopedSlots:t._u([{key:"id",fn:function(e){var o=e.item;return[n("td",{staticStyle:{width:"270px"}},[t._v("\n                    "+t._s(o.id)+"\n                  ")])]}},{key:"code",fn:function(e){var o=e.item;return[n("td",{staticStyle:{width:"270px"}},[t._v("\n                    "+t._s(o.code)+"\n                  ")])]}},{key:"name",fn:function(e){var o=e.item;return[n("td",{staticStyle:{width:"270px"}},[n("a",{attrs:{href:"#"},on:{click:function(e){return t.showFleet(o.id)}}},[t._v(t._s(o.name))])])]}},{key:"mobile",fn:function(e){var o=e.item;return[n("td",{staticStyle:{width:"270px"}},[t._v("\n                    "+t._s(o.mobile)+"\n                  ")])]}},{key:"identity",fn:function(e){var o=e.item;return[n("td",{staticStyle:{width:"270px"}},[t._v("\n                    "+t._s(o.identity)+"\n                  ")])]}},{key:"Wallet_balance",fn:function(e){var o=e.item;return[n("td",[n("CBadge",{attrs:{color:t.getWalletBadge(o.fleet_balance)}},[t._v(t._s(o.fleet_balance))])],1)]}},{key:"Last_Login",fn:function(e){var o=e.item;return[n("td",{staticStyle:{width:"270px"}},[t._v("\n                    "+t._s(o.Last_Login)+"\n                  ")])]}},{key:"status",fn:function(e){var o=e.item;return[n("td",[n("CBadge",{attrs:{color:t.getBadge(o.status)}},[t._v(t._s(o.status))])],1)]}},{key:"operation",fn:function(e){var o=e.item;return[n("td",[n("CButtonGroup",[n("CButton",{attrs:{size:"sm",color:"primary"},on:{click:function(e){return t.goWallet(o.id)}}},[t._v(t._s(t.$t("wallet")))]),t._v(" "),n("CButton",{attrs:{size:"sm",color:"default"},on:{click:function(e){return t.showFleet(o.id)}}},[t._v(t._s(t.$t("show")))]),t._v(" "),n("CButton",{attrs:{size:"sm",color:"warning"},on:{click:function(e){return t.editFleet(o.id)}}},[t._v(t._s(t.$t("edit")))]),t._v(" "),n("CButton",{attrs:{size:"sm",color:"danger"},on:{click:function(e){return t.deleteFleet(o.id)}}},[t._v(t._s(t.$t("delete")))])],1)],1)]}}],null,!1,2361377864)}):n("CDataTable",{attrs:{items:t.items,fields:t.fieldsAr,"index-column":"",hover:"","table-column":"","items-per-page-select":"",sorter:{external:!0,resetable:!0},columnFilter:{external:!0,lazy:!0},"sorter-value":t.sorter,"column-filter-value":t.columnFilter,loading:t.loading},on:{"pagination-change":t.changeItemsLimit,"update:sorterValue":function(e){t.sorter=e},"update:sorter-value":function(e){t.sorter=e},"update:columnFilterValue":function(e){t.columnFilter=e},"update:column-filter-value":function(e){t.columnFilter=e}},scopedSlots:t._u([{key:"رقم_التسلسل",fn:function(e){var o=e.item;return[n("td",{staticStyle:{width:"270px"}},[t._v("\n                    "+t._s(o.id)+"\n                  ")])]}},{key:"رقم_الكود",fn:function(e){var o=e.item;return[n("td",{staticStyle:{width:"270px"}},[t._v("\n                    "+t._s(o.code)+"\n                  ")])]}},{key:"الأسم",fn:function(e){var o=e.item;return[n("td",{staticStyle:{width:"270px"}},[n("a",{attrs:{href:"#"},on:{click:function(e){return t.showFleet(o.id)}}},[t._v(t._s(o.name))])])]}},{key:"الموبايل",fn:function(e){var o=e.item;return[n("td",{staticStyle:{width:"270px"}},[t._v("\n                    "+t._s(o.mobile)+"\n                  ")])]}},{key:"الرقم_التعريفى",fn:function(e){var o=e.item;return[n("td",{staticStyle:{width:"270px"}},[t._v("\n                    "+t._s(o.identity)+"\n                  ")])]}},{key:"رصيد_المحفظة",fn:function(e){var o=e.item;return[n("td",[n("CBadge",{attrs:{color:t.getWalletBadge(o.fleet_balance)}},[t._v(t._s(o.fleet_balance))])],1)]}},{key:"أخر_تسجيل",fn:function(e){var o=e.item;return[n("td",{staticStyle:{width:"270px"}},[t._v("\n                    "+t._s(o.Last_Login)+"\n                  ")])]}},{key:"الحالة",fn:function(e){var o=e.item;return[n("td",[n("CBadge",{attrs:{color:t.getBadge(o.status)}},[t._v(t._s(o.status))])],1)]}},{key:"التحكم",fn:function(e){var o=e.item;return[n("td",[n("CButtonGroup",[n("CButton",{attrs:{size:"sm",color:"primary"},on:{click:function(e){return t.goWallet(o.id)}}},[t._v(t._s(t.$t("wallet")))]),t._v(" "),n("CButton",{attrs:{size:"sm",color:"default"},on:{click:function(e){return t.showFleet(o.id)}}},[t._v(t._s(t.$t("show")))]),t._v(" "),n("CButton",{attrs:{size:"sm",color:"warning"},on:{click:function(e){return t.editFleet(o.id)}}},[t._v(t._s(t.$t("edit")))]),t._v(" "),n("CButton",{attrs:{size:"sm",color:"danger"},on:{click:function(e){return t.deleteFleet(o.id)}}},[t._v(t._s(t.$t("delete")))])],1)],1)]}}])}),t._v(" "),n("CPagination",{attrs:{pages:t.maxPages,"active-page":t.activePage},on:{"update:activePage":function(e){t.activePage=e},"update:active-page":function(e){t.activePage=e}}})],1)],1)],1)],1)],1)],1)])}),[],!1,null,null,null);e.default=l.exports}}]);