(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{137:function(t,e,n){var o=n(229);"string"==typeof o&&(o=[[t.i,o,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(17)(o,s);o.locals&&(t.exports=o.locals)},228:function(t,e,n){"use strict";n(137)},229:function(t,e,n){(t.exports=n(16)(!1)).push([t.i,"\n.d-inline{\n  font-size: 10px;\n}\ntd{\n  font-size: 12px;\n}\n",""])},533:function(t,e,n){"use strict";n.r(e);var o=n(2),s=n.n(o),i={name:"MyOrders",data:function(){return{items:[],fields:["id","code","name","mobile","identity","status","operation"],sorter:{column:"",asc:!1},activePage:1,maxPages:1,message:"",alertColor:"",showMessage:!1,dismissSecs:3,dismissCountDown:0,showDismissibleAlert:!1,columnFilter:{},pageOfItems:[],loading:!1,totalCount:0,statuses:[],allStatus:[]}},watch:{activePage:function(){this.getOrders()},sorter:{handler:function(){this.getOrders()},deep:!0},columnFilter:function(){this.getOrders()}},methods:{handleChangeStatus:function(t,e){console.log("changed ....");var n=this;s.a.post("/api/change-status-app/"+e+"?token="+localStorage.getItem("api_token"),{status_id:t}).then((function(t){n.alertColor="success",n.message="Successfully updated ",n.showAlert(),n.getFleets()})).catch((function(t){console.log(t)}))},changeItemsLimit:function(t){this.itemsLimit=t,this.getOrders()},editLink:function(t){return"driver-applications/".concat(t.toString(),"/edit")},showLink:function(t){return"driver-applications/".concat(t.toString(),"/show")},createOrder:function(){this.$router.push({path:"new-orders/create"})},editFleet:function(t){var e=this.editLink(t);this.$router.push({path:e})},showFleet:function(t){var e=this.showLink(t);this.$router.push({path:e})},deleteFleet:function(t){var e=this;s.a.post("/api/driver-applications/"+t+"?token="+localStorage.getItem("api_token"),{_method:"DELETE"}).then((function(t){e.alertColor="success",e.message="Successfully deleted user.",e.showAlert(),e.getFleets()})).catch((function(t){console.log(t),e.alertColor="danger",e.message="unexpected error occurred in delete the fleet.",e.showAlert()}))},countDownChanged:function(t){this.dismissCountDown=t},showAlert:function(){this.dismissCountDown=this.dismissSecs},getOrders:function(){this.loading=!0;var t=this;this.items=[],s.a.get("/api/driver/new-orders?page="+t.activePage+"&token="+localStorage.getItem("api_token"),{params:{sorter:t.sorter,columnFilter:t.columnFilter,itemsLimit:t.itemsLimit}}).then((function(e){console.log(e),t.loading=!1})).catch((function(e){console.log(e),t.loading=!1,t.alertColor="danger",t.message="unexpected error occurred in getting fleets.",t.showAlert()}))},makeFilter:function(){this.getOrders()}},mounted:function(){this.getOrders()}},a=(n(228),n(1)),r=Object(a.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CRow",[n("CCol",{attrs:{col:"12",xl:"12"}},[n("CRow",[n("CCol",{attrs:{col:"3"}},[n("CButton",{staticClass:"m-3",attrs:{color:"primary"},on:{click:function(e){return t.createOrder()}}},[t._v("Create Order")])],1),t._v(" "),n("CCol",{attrs:{col:"3"}},[n("CCallout",{attrs:{color:"info"}},[n("small",{staticClass:"text-muted"},[t._v("total")]),n("br"),t._v(" "),n("strong",{staticClass:"h4"},[t._v(t._s(t.totalCount))])])],1)],1)],1),t._v(" "),n("CCol",{attrs:{col:"12",xl:"12"}},[n("transition",{attrs:{name:"slide"}},[n("CCard",[n("CCardHeader",[n("span",{style:t.color="red"},[t._v("Orders")])]),t._v(" "),n("CCardBody",[n("CAlert",{attrs:{show:t.dismissCountDown,color:t.alertColor,fade:""},on:{"update:show":function(e){t.dismissCountDown=e}}},[t._v("\n          ("+t._s(t.dismissCountDown)+") "+t._s(t.message)+"\n        ")]),t._v(" "),n("CCol",{attrs:{sm:"12"}},[n("CDataTable",{attrs:{items:t.items,fields:t.fields,"index-column":"",hover:"","table-column":"","items-per-page-select":"",sorter:{external:!0,resetable:!0},columnFilter:{external:!0,lazy:!0},"sorter-value":t.sorter,"column-filter-value":t.columnFilter,loading:t.loading},on:{"pagination-change":t.changeItemsLimit,"update:sorterValue":function(e){t.sorter=e},"update:sorter-value":function(e){t.sorter=e},"update:columnFilterValue":function(e){t.columnFilter=e},"update:column-filter-value":function(e){t.columnFilter=e}},scopedSlots:t._u([{key:"name",fn:function(e){var o=e.item;return[n("td",{staticStyle:{width:"270px"}},[n("a",{attrs:{href:"#"},on:{click:function(e){return t.showFleet(o.id)}}},[t._v("\n\n              "+t._s(o.name)+"\n\n              ")])])]}},{key:"status",fn:function(e){var o=e.item;return[n("td",[n("CDropdown",{staticClass:"m-2",attrs:{size:"sm",color:o.application_status.class,offset:[0,5],"toggler-text":o.application_status.name}},t._l(t.allStatus,(function(e){return n("CDropdownItem",{directives:[{name:"show",rawName:"v-show",value:e!==o.status.name,expression:"status !== item.status.name"}],key:e.id,on:{click:function(n){return t.handleChangeStatus(e.id,o.id)}}},[t._v(t._s(e.name))])})),1)],1)]}},{key:"operation",fn:function(e){var o=e.item;return[n("td",[n("CButtonGroup",[n("CButton",{attrs:{size:"sm",color:"info"},on:{click:function(e){return t.showFleet(o.id)}}},[n("CIcon",{attrs:{name:"cil-list"}})],1),t._v(" "),n("CButton",{attrs:{size:"sm",color:"warning"},on:{click:function(e){return t.editFleet(o.id)}}},[n("CIcon",{attrs:{name:"cil-pencil"}})],1),t._v(" "),n("CButton",{attrs:{size:"sm",color:"danger"},on:{click:function(e){return t.deleteFleet(o.id)}}},[n("CIcon",{attrs:{name:"cil-trash"}})],1)],1)],1)]}}])}),t._v(" "),n("CPagination",{attrs:{pages:t.maxPages,"active-page":t.activePage},on:{"update:activePage":function(e){t.activePage=e},"update:active-page":function(e){t.activePage=e}}})],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=r.exports}}]);