(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{132:function(t,e,n){var a=n(219);"string"==typeof a&&(a=[[t.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(17)(a,i);a.locals&&(t.exports=a.locals)},218:function(t,e,n){"use strict";n(132)},219:function(t,e,n){(t.exports=n(16)(!1)).push([t.i,"\n.image {\n  width: 150px;\n  height: 150px;\n  background-size: cover;\n  cursor: pointer;\n  margin: 10px;\n  border-radius: 3px;\n}\n",""])},31:function(t,e,n){t.exports=function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}var e={props:{images:{type:Array,required:!0},index:{type:Number,required:!1,default:null}},data:function(){return{imgIndex:this.index,image:null,galleryXPos:0,thumbnailWidth:120}},computed:{imageUrl:function(){var t=this.images[this.imgIndex];return"string"==typeof t?t:t.url},alt:function(){var e=this.images[this.imgIndex];return"object"===t(e)?e.alt:""},isMultiple:function(){return this.images.length>1}},watch:{index:function(t,e){var n=this;this.imgIndex=t,null==e&&null!=t&&this.$nextTick((function(){n.updateThumbails()}))}},mounted:function(){var t=this;window.addEventListener("keydown",(function(e){37===e.keyCode?t.onPrev():39===e.keyCode?t.onNext():27===e.keyCode&&t.close()}))},methods:{close:function(){var t={imgIndex:this.imgIndex};this.imgIndex=null,this.$emit("close",t)},onPrev:function(){null!==this.imgIndex&&(this.imgIndex>0?this.imgIndex--:this.imgIndex=this.images.length-1,this.updateThumbails())},onNext:function(){null!==this.imgIndex&&(this.imgIndex<this.images.length-1?this.imgIndex++:this.imgIndex=0,this.updateThumbails())},onClickThumb:function(t,e){this.imgIndex=e,this.updateThumbails()},updateThumbails:function(){if(this.$refs.gallery){var t=this.$refs.gallery.clientWidth,e=this.imgIndex*this.thumbnailWidth,n=this.images.length*this.thumbnailWidth,a=Math.floor(t/(2*this.thumbnailWidth))*this.thumbnailWidth;n<t||(e<a?this.galleryXPos=0:e>this.images.length*this.thumbnailWidth-t+a?this.galleryXPos=-(this.images.length*this.thumbnailWidth-t-20):this.galleryXPos=-this.imgIndex*this.thumbnailWidth+a)}}}};function n(t,e,n,a,i,o,s,l,r,c){"boolean"!=typeof s&&(r=l,l=s,s=!1);const d="function"==typeof n?n.options:n;let p;if(t&&t.render&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns,d._compiled=!0,i&&(d.functional=!0)),a&&(d._scopeId=a),o?(p=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,r(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},d._ssrRegister=p):e&&(p=s?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,l(t))}),p)if(d.functional){const t=d.render;d.render=function(e,n){return p.call(n),t(e,n)}}else{const t=d.beforeCreate;d.beforeCreate=t?[].concat(t,p):[p]}return n}const a="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function i(t){return(t,e)=>function(t,e){const n=a?e.media||"default":t,i=s[n]||(s[n]={ids:new Set,styles:[]});if(!i.ids.has(t)){i.ids.add(t);let n=e.source;if(e.map&&(n+="\n/*# sourceURL="+e.map.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e.map))))+" */"),i.element||(i.element=document.createElement("style"),i.element.type="text/css",e.media&&i.element.setAttribute("media",e.media),void 0===o&&(o=document.head||document.getElementsByTagName("head")[0]),o.appendChild(i.element)),"styleSheet"in i.element)i.styles.push(n),i.element.styleSheet.cssText=i.styles.filter(Boolean).join("\n");else{const t=i.ids.size-1,e=document.createTextNode(n),a=i.element.childNodes;a[t]&&i.element.removeChild(a[t]),a.length?i.element.insertBefore(e,a[t]):i.element.appendChild(e)}}}(t,e)}let o;const s={};return n({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"modal"}},[null!==t.imgIndex?n("div",{staticClass:"vgs",on:{click:t.close}},[n("button",{staticClass:"vgs__close",attrs:{type:"button"},on:{click:t.close}},[t._v("\n      ×\n    ")]),t._v(" "),t.isMultiple?n("button",{staticClass:"vgs__prev",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.onPrev(e)}}},[t._v("\n      ‹\n    ")]):t._e(),t._v(" "),t.images?n("div",{staticClass:"vgs__container",on:{click:function(e){return e.stopPropagation(),t.onNext(e)}}},[n("img",{staticClass:"vgs__container__img",attrs:{src:t.imageUrl,alt:t.alt},on:{click:function(e){return e.stopPropagation(),t.onNext(e)}}}),t._v(" "),t._t("default")],2):t._e(),t._v(" "),t.isMultiple?n("button",{staticClass:"vgs__next",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.onNext(e)}}},[t._v("\n      ›\n    ")]):t._e(),t._v(" "),t.isMultiple?n("div",{ref:"gallery",staticClass:"vgs__gallery"},[t.images?n("div",{staticClass:"vgs__gallery__title"},[t._v("\n        "+t._s(t.imgIndex+1)+" / "+t._s(t.images.length)+"\n      ")]):t._e(),t._v(" "),t.images?n("div",{staticClass:"vgs__gallery__container",style:{transform:"translate("+t.galleryXPos+"px, 0)"}},t._l(t.images,(function(e,a){return n("img",{key:a,staticClass:"vgs__gallery__container__img",class:{"vgs__gallery__container__img--active":a===t.imgIndex},attrs:{src:"string"==typeof e?e:e.url,alt:"string"==typeof e?"":e.alt},on:{click:function(n){return n.stopPropagation(),t.onClickThumb(e,a)}}})})),0):t._e()]):t._e()]):t._e()])},staticRenderFns:[]},(function(t){t&&t("data-v-e9cc33d2_0",{source:".vgs{transition:opacity .2s ease;position:fixed;z-index:9998;top:0;left:0;width:100%;min-height:100%;height:100vh;background-color:rgba(0,0,0,.8);display:table}.vgs__close{color:#fff;position:absolute;top:0;right:0;background-color:transparent;border:none;font-size:25px;width:50px;height:50px;cursor:pointer;z-index:999}.vgs__close:focus{outline:0}.vgs__next,.vgs__prev{position:absolute;top:50%;margin-top:-25px;width:50px;height:50px;z-index:999;cursor:pointer;font-size:40px;color:#fff;background-color:transparent;border:none}.vgs__next:focus,.vgs__prev:focus{outline:0}.vgs__prev{left:0}.vgs__next{right:0}.vgs__container{position:absolute;overflow:hidden;cursor:pointer;overflow:hidden;max-width:100vh;margin:.5rem auto 0;left:.5rem;right:.5rem;height:60vh;border-radius:12px;background-color:#000}@media (max-width:767px){.vgs__container{width:100%;max-width:100%;top:50%;margin-top:-140px;left:0;right:0;border-radius:0;height:280px}}.vgs__container__img{width:100%;height:100%;object-fit:contain}.vgs__gallery{overflow-x:hidden;overflow-y:hidden;position:absolute;bottom:10px;margin:auto;max-width:100vh;white-space:nowrap;left:.5rem;right:.5rem}@media (max-width:767px){.vgs__gallery{display:none}}.vgs__gallery__title{color:#fff;margin-bottom:.5rem}.vgs__gallery__container{overflow:visible;display:block;height:100px;white-space:nowrap;transition:all .2s ease-in-out;width:100%}.vgs__gallery__container__img{width:100px;height:100px;object-fit:cover;display:inline-block;float:none;margin-right:20px;cursor:pointer;opacity:.6;border-radius:8px}.vgs__gallery__container__img--active{width:100px;display:inline-block;float:none;opacity:1}.modal-enter{opacity:0}.modal-leave-active{opacity:0}",map:void 0,media:void 0})}),e,void 0,!1,void 0,!1,i,void 0,void 0)}()},526:function(t,e,n){"use strict";n.r(e);var a=n(2),i=n.n(a),o=n(31),s={name:"EditUser",components:{VueGallerySlideshow:n.n(o).a},props:{caption:{type:String,default:"User id"}},data:function(){return{allStatus:{},name:"",mobile:"",identity:"",nationality:"",password:"",application_status_id:"",age:"",bank_name:"",vehicle_type:"",nationalityId:"",contract_type:"",bank_iban:"",showMessage:!1,message:"",alertColor:"",dismissSecs:7,dismissCountDown:0,showDismissibleAlert:!1,images:[],files:"",fileId:"",imageIndex:null,progress:0,deleteProgress:0}},methods:{goBack:function(){this.$router.go(-1)},fleetInfo:function(){var t=this;i.a.get("/api/driver-applications/"+t.$route.params.id+"/edit?token="+localStorage.getItem("api_token")).then((function(e){console.log(e.data.fleet.files),t.name=e.data.fleet.name,t.mobile=e.data.fleet.mobile,t.identity=e.data.fleet.identity,t.password=e.data.fleet.password,t.nationality=e.data.fleet.nationality,t.application_status_id=e.data.fleet.application_status_id,t.age=e.data.fleet.age,t.bank_name=e.data.fleet.bank_name,t.vehicle_type=e.data.fleet.vehicle_type,t.nationalityId=e.data.fleet.nationalityId,t.contract_type=e.data.fleet.contract_type,t.bank_iban=e.data.fleet.bank_iban,t.allStatus=e.data.status,t.files=e.data.fleet.files,t.images=[],e.data.fleet.files.map((function(e){t.images.push(e.file_path)}))})).catch((function(e){console.log(e),t.alertColor="danger",t.message="unexpected error occurred in loading the fleet info.",t.showAlert()}))},update:function(){var t=this,e=new FormData;e.append("name",this.name),e.append("mobile",this.mobile),e.append("identity",this.identity),e.append("password",this.password),e.append("age",this.age),e.append("bank_name",this.bank_name),e.append("vehicle_type",this.vehicle_type),e.append("nationalityId",this.nationalityId),e.append("nationality",this.nationality),e.append("contract_type",this.contract_type),e.append("bank_iban",this.bank_iban),e.append("application_status_id",this.application_status_id),e.append("_method","PUT"),i.a.post("/api/driver-applications/"+t.$route.params.id+"?token="+localStorage.getItem("api_token"),e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.alertColor="success",t.message="Successfully updated user.",t.showAlert()})).catch((function(e){console.log(e),t.alertColor="danger",t.message="unexpected error occurred in Editing the fleet.",t.showAlert()}))},countDownChanged:function(t){this.dismissCountDown=t},showAlert:function(){this.dismissCountDown=this.dismissSecs},deleteFile:function(t){var e=this;i.a.post("/api/fleets/deleteFile/"+t+"?token="+localStorage.getItem("api_token"),{},{onUploadProgress:function(t){this.deleteProgress=parseInt(Math.round(100*t.loaded/t.total))}.bind(this)}).then((function(){e.fleetInfo(),e.deleteProgress=0})).catch((function(t){console.log(t)}))},handleFileUpload:function(t,e){var n=this,a=new FormData;a.append("file",t[0]),i.a.post("/api/fleets/addFile/"+n.$route.params.id+"?token="+localStorage.getItem("api_token"),a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(t){this.progress=parseInt(Math.round(100*t.loaded/t.total))}.bind(this)}).then((function(){n.fleetInfo(),n.progress=0})).catch((function(t){console.log(t)}))},imageClick:function(t){this.imageIndex=this.images.indexOf(t)}},mounted:function(){this.fleetInfo()}},l=(n(218),n(1)),r=Object(l.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CRow",[n("CCol",{attrs:{col:"12",lg:"6"}},[n("CCard",{attrs:{"no-header":""}},[n("CCardBody",[n("CForm",[n("template",{slot:"header"},[t._v("\n            Edit Fleet id:  "+t._s(t.$route.params.id)+"\n          ")]),t._v(" "),n("CAlert",{attrs:{show:t.dismissCountDown,color:"primary",fade:""},on:{"update:show":function(e){t.dismissCountDown=e}}},[t._v("\n            ("+t._s(t.dismissCountDown)+") "+t._s(t.message)+"\n          ")]),t._v(" "),n("CInput",{attrs:{type:"text",label:"Name",placeholder:"Name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),n("CInput",{attrs:{type:"text",label:"Mobile",placeholder:"Mobile"},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}}),t._v(" "),n("CInput",{attrs:{type:"text",label:"Identity",placeholder:"Identity"},model:{value:t.identity,callback:function(e){t.identity=e},expression:"identity"}}),t._v(" "),n("CInput",{attrs:{type:"text",label:"Nationality",placeholder:"Nationality"},model:{value:t.nationality,callback:function(e){t.nationality=e},expression:"nationality"}}),t._v(" "),n("CInput",{attrs:{type:"text",label:"Age",placeholder:"Age"},model:{value:t.age,callback:function(e){t.age=e},expression:"age"}}),t._v(" "),n("CInput",{attrs:{type:"text",label:"Vehicle Type",placeholder:"vehicle_type"},model:{value:t.vehicle_type,callback:function(e){t.vehicle_type=e},expression:"vehicle_type"}}),t._v(" "),n("CInput",{attrs:{type:"text",label:"nationalityId",placeholder:"nationalityId"},model:{value:t.nationalityId,callback:function(e){t.nationalityId=e},expression:"nationalityId"}}),t._v(" "),n("CInput",{attrs:{type:"text",label:"bank_name",placeholder:"bank_name"},model:{value:t.bank_name,callback:function(e){t.bank_name=e},expression:"bank_name"}}),t._v(" "),n("CInput",{attrs:{type:"text",label:"bank_iban",placeholder:"bank_iban"},model:{value:t.bank_iban,callback:function(e){t.bank_iban=e},expression:"bank_iban"}}),t._v(" "),n("CInput",{attrs:{type:"text",label:"Password",placeholder:"Password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),n("div",{staticClass:"form-group",attrs:{role:"group"}},[n("label",{},[t._v("  Application Status ")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.application_status_id,expression:"application_status_id"}],staticClass:"form-control",attrs:{type:"text"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.application_status_id=e.target.multiple?n:n[0]}}},t._l(t.allStatus,(function(e){return n("option",{domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),0)]),t._v(" "),n("div",{staticClass:"form-group",attrs:{role:"group"}},[n("label",{},[t._v(" Contract Type ")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.contract_type,expression:"contract_type"}],staticClass:"form-control",attrs:{type:"text"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.contract_type=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"full_time"}},[t._v(" Full Time ")]),t._v(" "),n("option",{attrs:{value:"free_lance"}},[t._v(" FreeLance ")])])]),t._v(" "),n("CButton",{attrs:{color:"primary"},on:{click:function(e){return t.update()}}},[t._v("Save")]),t._v(" "),n("CButton",{attrs:{color:"danger"},on:{click:t.goBack}},[t._v("Back")])],2)],1)],1)],1),t._v(" "),n("CCol",{attrs:{col:"12",lg:"6"}},[n("CCard",{attrs:{"no-header":""}},[n("CCardBody",[n("CForm",[n("template",{slot:"header"},[t._v("\n            Set Images:  "+t._s(t.$route.params.id)+"\n          ")]),t._v(" "),n("CAlert",{attrs:{show:t.dismissCountDown,color:"primary",fade:""},on:{"update:show":function(e){t.dismissCountDown=e}}},[t._v("\n            ("+t._s(t.dismissCountDown)+") "+t._s(t.message)+"\n          ")]),t._v(" "),n("CIcon",{attrs:{content:t.$options.plusIcon}}),t._v(" "),n("CIcon",{attrs:{content:t.$options.fileIcon}}),t._v(" "),n("CInputFile",{attrs:{type:"file",placeholder:"New file"},on:{change:t.handleFileUpload}})],2),t._v(" "),n("CProgress",{staticClass:"mb-2",attrs:{value:t.progress,color:"success",striped:"",animated:!0}})],1)],1),t._v(" "),n("CCard",{attrs:{"no-header":""}},[n("CCardBody",[n("CProgress",{staticClass:"mb-2",attrs:{value:t.deleteProgress,color:"warning",striped:"",animated:!0}}),t._v(" "),n("CRow",t._l(t.files,(function(e){return n("CCol",{key:e.id,attrs:{col:"4"}},[n("img",{staticClass:"image",attrs:{src:e.file_path},on:{click:function(n){return t.imageClick(e.file_path)}}}),t._v(" "),n("CButton",{staticClass:"btn btn-danger",on:{click:function(n){return t.deleteFile(e.id)}}},[t._v("delete")])],1)})),1),t._v(" "),n("vue-gallery-slideshow",{attrs:{images:t.images,index:t.imageIndex},on:{close:function(e){t.imageIndex=null}}})],1)],1)],1)],1)}),[],!1,null,null,null);e.default=r.exports}}]);